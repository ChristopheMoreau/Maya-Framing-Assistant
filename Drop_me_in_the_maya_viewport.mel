// this script will create a button on your current shelf 
// that when clicked, will open the Frame Helper window
//
// Copyright (c) 2022 Moreau Christophe moreau.vfx@gmail.com

global proc string mayaFramingHelper() {
    string $whatIs = `whatIs mayaFramingHelper`;
    string $path = `substring $whatIs 25 999`;
    string $filename = `substitute "/Drop_me_in_the_maya_viewport.mel" $path ""`;;
    return $filename;
}

global proc MayaFrameHelper_install()
{
	string $path = mayaFramingHelper();
	//print $path;
	
	string $cmd = ("import os" + "\n" +
	"import sys" + "\n" + 
	"scriptPath = r'" + $path + "'\n" +
	"if scriptPath not in sys.path:" + "\n" +
	"	sys.path.insert(0, scriptPath)" + "\n" +
	"import mayaFramingHelper" + "\n" + 
	"mayaFramingHelper.main()");

	string $icon = $path + "/gui/" + "frame_32x32.ico";
	print $icon;

	global string $gShelfTopLevel;
	setParent `shelfTabLayout -query -selectTab $gShelfTopLevel`;

	if( `filetest -r $icon` )
		{
			shelfButton -command $cmd -stp "python" -image $icon;
		}
	else
		{
			shelfButton -command $cmd -stp "python" -imageOverlayLabel "Maya Frame Helper";
		}
}
MayaFrameHelper_install();
